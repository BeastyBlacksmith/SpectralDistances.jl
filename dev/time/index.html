<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Time-Frequency distances · SpectralDistances</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SpectralDistances</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">SpectralDistances</a></li><li><a class="tocitem" href="../ltimodels/">Models and root manipulations</a></li><li><a class="tocitem" href="../distances/">Distances</a></li><li class="is-active"><a class="tocitem" href>Time-Frequency distances</a><ul class="internal"><li><a class="tocitem" href="#Overview-1"><span>Overview</span></a></li><li><a class="tocitem" href="#Function-reference-1"><span>Function reference</span></a></li><li><a class="tocitem" href="#Docstrings-1"><span>Docstrings</span></a></li></ul></li><li><a class="tocitem" href="../interpolations/">Interpolations and Barycenters</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../misc/">Misc.</a></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Time-Frequency distances</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Time-Frequency distances</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/baggepinnen/SpectralDistances.jl/blob/master/docs/src/time.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Time-Frequency-distances-1"><a class="docs-heading-anchor" href="#Time-Frequency-distances-1">Time-Frequency distances</a><a class="docs-heading-anchor-permalink" href="#Time-Frequency-distances-1" title="Permalink"></a></h1><p>For non-stationary signals, it is important to consider how the spectrum changes with time. This package has some, so far, basic support for time-frequency representations of non-stationary signals.</p><h2 id="Overview-1"><a class="docs-heading-anchor" href="#Overview-1">Overview</a><a class="docs-heading-anchor-permalink" href="#Overview-1" title="Permalink"></a></h2><p>We define a custom fit method for fitting time varying spectra, <a href="@ref"><code>TimeWindow</code></a>. It takes as arguments an inner fitmethod, the number of points that form a time window, and the number of points that overlap between two consecutive time windows:</p><pre><code class="language-julia-repl">julia&gt; fitmethod = TimeWindow(TLS(na=2), 1000, 500)
TimeWindow{TLS}(TLS(2), 1000, 500)

julia&gt; y = sin.(0:0.1:100);

julia&gt; model = fitmethod(y)
TimeVaryingRoots{ContinuousRoots{Complex{Double64},Array{Complex{Double64},1}}}(ContinuousRoots{Complex{Double64},Array{Complex{Double64},1}}[[-1.1102230246251565e-16 - 0.10000000000000056im, -1.1102230246251565e-16 + 0.10000000000000056im]])</code></pre><p>This produces a custom model type, <a href="@ref"><code>TimeVaryingRoots</code></a> that internally stores a vector of <a href="../ltimodels/#SpectralDistances.ContinuousRoots"><code>ContinuousRoots</code></a>.</p><p>Accompanying this time-varying model is a time-aware distance, <a href="@ref"><code>TimeDistance</code></a>. It contains an inner distance (currently only <a href="../distances/#SpectralDistances.OptimalTransportRootDistance"><code>OptimalTransportRootDistance</code></a> supported), and some parameters that are specific to the time dimension, example:</p><pre><code class="language-julia-repl">julia&gt; dist = TimeDistance(inner=OptimalTransportRootDistance(domain=Continuous(), p=2, weight=s1∘residueweight), tp=2, c=0.1)
TimeDistance{OptimalTransportRootDistance{Continuous,typeof(identity),Base.var&quot;#64#65&quot;{typeof(s1),typeof(residueweight)}},Float64}(OptimalTransportRootDistance{Continuous,typeof(identity),Base.var&quot;#64#65&quot;{typeof(s1),typeof(residueweight)}}(Continuous(), identity, Base.var&quot;#64#65&quot;{typeof(s1),typeof(residueweight)}(SpectralDistances.s1, SpectralDistances.residueweight), 0.01, 2), 2, 0.1)</code></pre><p><code>tp</code> is the same as <code>p</code> but for the time dimension, and <code>c</code> trades off the distance along the time axis with the distance along the frequency axis. A smaller <code>c</code> makes it cheaper to transport mass across time. The frequency axis spans <code>[-π,π]</code> and the time axis is the non-negative integers, which should give you an idea for how to make this trade-off.</p><p>Below, we construct a signal that changes frequency after half the time, and measure the distance between two different such signals. If the time penalty is large, it is cheaper to transport mass along the frequency axis, but if we make <code>c</code> smaller, after a while the transport is cheaper along the time dimension</p><pre><code class="language-julia"># Construct a signal that changes freq after half
signal(f1,f2) = [sin.((0:0.1:49.9).*f1);sin.((50:0.1:99.9).*f2)]
fm = TimeWindow(TLS(na=2), 500, 0)
m = signal(1,2)  |&gt; fm # Signal 1
m2 = signal(2,1) |&gt; fm # Signal 2 has the reverse frequencies

# First it is expensive to transport along time
dist = TimeDistance(inner=OptimalTransportRootDistance(domain=Continuous(), p=1, weight=s1∘residueweight), tp=1, c=1.0) # c is large
evaluate(dist, m, m2)</code></pre><pre><code class="language-none">0.10000000041222791</code></pre><pre><code class="language-julia"># Then we make it cheaper
dist = TimeDistance(inner=OptimalTransportRootDistance(domain=Continuous(), p=1, weight=s1∘residueweight), tp=1, c=0.01) # c is small
evaluate(dist, m, m2)</code></pre><pre><code class="language-none">0.010011105717993804</code></pre><h2 id="Function-reference-1"><a class="docs-heading-anchor" href="#Function-reference-1">Function reference</a><a class="docs-heading-anchor-permalink" href="#Function-reference-1" title="Permalink"></a></h2><ul></ul><h2 id="Docstrings-1"><a class="docs-heading-anchor" href="#Docstrings-1">Docstrings</a><a class="docs-heading-anchor-permalink" href="#Docstrings-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../distances/">« Distances</a><a class="docs-footer-nextpage" href="../interpolations/">Interpolations and Barycenters »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 1 April 2020 09:02">Wednesday 1 April 2020</span>. Using Julia version 1.4.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
